var Formoid=function(){var e="https://formoid.net/api/push";function t(e,t){return new Promise((function(r,n){var a=new XMLHttpRequest;a.open(t.type,e),a.onload=function(){if(200!==a.status)return n(new Error("Incorrect server response."));r(a.responseText)},a.onerror=function(){var e="Failed to query the server. ";"onLine"in navigator&&!navigator.onLine?e+="No connection to the Internet.":e+="Check the connection and try again.",n(new Error(e))},a.send(t.data)}))}var r=function(e,t){return e="__"+e+"__",t.length?(this[e]=t[0],this):this[e]},n=function(e){e=e||{},this.__email__=e.email||"",this.__title__=e.title||"",this.__data__=e.data||[]};return n.prototype.email=function(e){return r.call(this,"email",arguments)},n.prototype.title=function(e){return r.call(this,"title",arguments)},n.prototype.data=function(e){return r.call(this,"data",arguments)},n.prototype.send=function(r){return t(e,{type:"POST",data:JSON.stringify({email:this.__email__,form:{title:this.__title__,data:arguments.length?r:this.__data__}})}).then((function(e){var t;try{t=JSON.parse(e)}catch(e){throw new Error("Incorrect server response.")}if(t.error)throw new Error(t.error);return t.response}))},{Form:function(e){return new n(e)}}}(),isValidEmail=function(e){return!e.value||/^([^@]+?)@(([a-z0-9]-*)*[a-z0-9]+\.)+([a-z0-9]+)$/i.test(e.value)},formComponents=document.querySelectorAll('[data-form-type="formoid"]');formComponents.forEach((function(e){var t,r="FORM"===e.tagName?e:e.querySelector("form"),n=e.querySelector("[data-form-alert]"),a=e.getAttribute("data-form-title")?e:e.querySelector("[data-form-title]"),i=e.querySelector('[type="submit"]'),o=e.querySelectorAll("[data-form-field]"),s=n.innerHTML;r.addEventListener("change",(function(e){"file"===e.target.type&&e.target.files[0].size>1e6&&(n.removeAttribute("hidden"),n.classList.remove("alert-success"),n.classList.add("alert-danger"),n.innerHTML="File size must be less than 1mb",i.classList.add("btn-loading"),i.setAttribute("disabled",!0))})),r.addEventListener("submit",(function(l){if(l.stopPropagation(),l.preventDefault(),!i.classList.contains("btn-loading")){var c=o;r.classList.add("form-active"),i.classList.add("btn-loading"),i.setAttribute("disabled",!0),n.innerHTML="",t=t||Formoid.Form({email:e.querySelector("[data-form-email]").value,title:a.getAttribute("data-form-title")||a.innerText}),Promise.all(Array.prototype.map.call(c,(function(e){return function(e){return new Promise((function(t,r){if("email"===e.getAttribute("name")&&!isValidEmail(e))return r(new Error("Form is not valid"));var n=e.getAttribute("data-form-field")||e.getAttribute("name");switch(e.getAttribute("type")){case"file":var a=e.files[0];if(!a)return t();var i=new FileReader;i.onloadend=function(){t([n,i.result])},i.onerror=function(){r(i.error)},i.readAsDataURL(a);break;case"checkbox":t([n,e.checked?e.value:"No"]);break;case"radio":t(e.checked&&[n,e.value]);break;default:t([n,e.value])}}))}(e)}))).then((function(e){return t.send(e.filter((function(e){return e})))})).then((function(e){r.reset(),r.classList.remove("form-active"),n.innerText=s||e,n.classList.remove("alert-danger"),n.classList.add("alert-success")}),(function(e){n.innerText=e.message,n.classList.remove("alert-success"),n.classList.add("alert-danger")})).then((function(){i.classList.remove("btn-loading"),i.removeAttribute("disabled"),n.removeAttribute("hidden")}))}})),o.forEach((function(e){e.addEventListener("focus",(function(){n.setAttribute("hidden","hidden"),n.classList.add("alert-success"),n.classList.remove("alert-danger"),n.innerHTML="",i.classList.remove("btn-loading"),i.removeAttribute("disabled")}))}))}));