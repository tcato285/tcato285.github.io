!function(){"use strict";function e(e){if("false"===e)return!1;var t=/(?:\?v=|\/embed\/|\.be\/)([-a-z0-9_]+)/i.exec(e)||/^([-a-z0-9_]+)$/i.exec(e);return!!t&&t[1]}function t(e){e.target.h.closest(".mbr-slider").classList.contains("in")&&e.target.playVideo()}function r(e){if(!e)return;let t=!(e==document)&&e.matches(".mbr-gallery"),r=t&&e.id&&e.id.toLowerCase().includes("gallery");return!!(t&&r)}var l,a,i,n,o,s="function"==typeof jQuery;if(s&&(l=jQuery),!(a=s?l("html").hasClass("is-builder"):document.querySelector("html").classList.contains("is-builder"))){var d=document.createElement("script");d.src="https://www.youtube.com/iframe_api";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(d,c);var u=[];document.querySelectorAll(".carousel-item.video-container > img").forEach((e=>e.style.display="none")),window.onYouTubeIframeAPIReady=function(){var r=r||{};r.YTAPIReady||(r.YTAPIReady=!0,document.dispatchEvent(new CustomEvent("YTAPIReady"))),document.querySelectorAll(".video-slide").forEach((function(r,l){var a=document.createElement("div");a.setAttribute("id","mbr-video-"+l),a.setAttribute("data-video-num",l),a.classList.add("mbr-background-video");var i=document.createElement("div");if(a.classList.add("item-overlay"),document.querySelectorAll(".video-container")[l].appendChild(a).appendChild(i),r.setAttribute("data-video-num",l),-1!==r.getAttribute("data-video-url").indexOf("vimeo.com")){var n={id:r.getAttribute("data-video-url"),width:"100%",height:"100%",loop:!0};(o=new Vimeo.Player("mbr-video-"+l,n)).playVideo=Vimeo.play}else var o=new YT.Player("mbr-video-"+l,{height:"100%",width:"100%",videoId:e(r.getAttribute("data-video-url")),events:{onReady:t},playerVars:{rel:0}});u.push(o)}))}}function m(e){var t,r,l,a=e.target;"undefined"!=typeof Masonry&&(t=a,r=".mbr-gallery",l=Array.from(t.querySelectorAll(r)),t.matches&&t.matches(r)&&l.splice(0,0,t),l).forEach((function(e){var t=e.querySelector(".mbr-gallery-row");t&&imagesLoaded(t).on("progress",(function(e,r){var l=new Masonry(t,{itemSelector:".mbr-gallery-item:not(.mbr-gallery-item__hided)",percentPosition:!0,horizontalOrder:!0});l.reloadItems(),t.addEventListener("filter",function(){l.reloadItems(),l.layout(),window.dispatchEvent(new CustomEvent("update.parallax"))}.bind(this,t)),imagesLoaded(t).on("progress",(function(){l.layout()}))}))}))}function f(e,t,r,l){e.style.top=r+"px",e.style.height=t-2*r-2*l+"px"}function y(e,t,r,l,a){var i=e.querySelector("img");i.complete&&i.naturalWidth>50&&i.naturalHeight>50?v(i,e,t,r,l,a):i.addEventListener("load",(function(){v(i,e,t,r,l,a)}),{once:!0})}function v(e,t,r,l,a,i){var n,o,s=e.naturalWidth,d=e.naturalHeight;l/r>s/d?n=(r-2*i)*s/d:n=l-2*i;o=(r-(n=n>=s?s:n)*d/s)/2,e.style.width=parseInt(n)+"px",e.style.height=n*d/s+"px",t.style.top=o+a+"px","flex"==getComputedStyle(t.parentElement,null).display&&(t.parentElement.style.display="block")}function g(e,t,r,l,a,i){e.querySelector(".modal-dialog").querySelectorAll(".carousel-item").forEach((function(e){(!i&&!e.classList.contains("carousel-item-next")&&!e.classList.contains("carousel-item-prev")||i&&!e.classList.contains("active"))&&(e.classList.contains("video-container")?f(e,r,l,a):y(e,r,t,l,a))}))}function p(){var e=window.innerWidth-0,t=window.innerHeight-0;if(o){var r,l=!1;o.querySelector(".modal-dialog").querySelector(".carousel-item.carousel-item-next")?r=o.querySelector(".modal-dialog").querySelector(".carousel-item.carousel-item-next"):(r=o.querySelector(".modal-dialog").querySelector(".carousel-item.active"),l=!0),r.classList.contains("video-container")?f(r,t,0,10):y(r,t,e,0,10),clearTimeout(n),n=setTimeout(g,200,o,e,t,0,10,l)}}s&&l(document).on("add.cards",(function(e){var t=l(e.target);if(!r(e.target))return;t.on("click",".mbr-gallery-filter li",(function(e){e.preventDefault();var r=l(this).closest("li");r.parent().find("li").removeClass("active"),r.addClass("active");var a=r.closest("section").find(".mbr-gallery-row"),i=l(this)[0].textContent.trim();t.find(".mbr-gallery-item").each((function(e,t){var a=l(this),n=a.attr("data-tags").split(",").map((function(e){return e.trim()}));-1!==l.inArray(i,n)||r.hasClass("mbr-gallery-filter-all")?(a.removeClass("mbr-gallery-item__hided"),a.css("left","0")):(a.addClass("mbr-gallery-item__hided"),a.css("left","300px"))})),a.closest(".mbr-gallery-row")[0].dispatchEvent(new CustomEvent("filter"))}));let a=e.target.querySelector(".modal");a&&a.addEventListener("show.bs.modal",(e=>e.preventDefault()))})),a&&l(document).on("changeButtonColor.cards",(function(e){var t=l(e.target);if(t.find(".mbr-gallery-filter").length>0&&l(e.target).find(".mbr-gallery-filter").hasClass("gallery-filter-active")){var r=(t.find(".mbr-gallery-filter .mbr-gallery-filter-all").find("a").attr("class")||"").replace(/(^|\s)active(\s|$)/," ").trim();t.find(".mbr-gallery-filter ul li:not(.mbr-gallery-filter-all) a").attr("class",r)}m(e)})),s&&l(document).on("add.cards changeParameter.cards",(function(e){var t=l(e.target),a=[];if(r(e.target)){if(t.find(".mbr-gallery-item").each((function(e){(l(this).attr("data-tags")||"").trim().split(",").map((function(e){e=e.trim(),-1===l.inArray(e,a)&&a.push(e)}))})),t.find(".mbr-gallery-filter").length>0&&l(e.target).find(".mbr-gallery-filter").hasClass("gallery-filter-active")){var i="";t.find(".mbr-gallery-filter ul li:not(.mbr-gallery-filter-all)").remove();var n=t.find(".mbr-gallery-filter .mbr-gallery-filter-all").clone();n.find("a").removeClass("active"),a.map((function(e){n.find("a").length?n.find("a").text(e):n.text(e),i+="<li>"+n.html()+"</li>"})),n.remove(),t.find(".mbr-gallery-filter ul").append(i)}m(e)}})),s&&l(document).on("change.cards",(function(e){m(e)})),s&&l(document).on("lazyload",(function(e){m(e),l(window).scrollEnd((function(){m(e)}),250)})),a||document.addEventListener("DOMContentLoaded",(function(e){m(e)})),document.querySelectorAll(".mbr-gallery-item").forEach((e=>e.addEventListener("click",(e=>e.stopPropagation()))));var h=document.querySelectorAll(".mbr-gallery");h.length&&h.forEach((e=>{e.querySelector(".mbr-gallery-filter")&&function(e){var t=e,l=e.querySelector(".mbr-gallery-filter-all"),a=[];if(t&&r(t))if(t.querySelectorAll(".mbr-gallery-item").forEach((function(e){(e.getAttribute("data-tags")||"").trim().split(",").map((function(e){var t=e.trim();-1==a.indexOf(t)&&a.push(t)}))})),t.querySelectorAll(".mbr-gallery-filter").length>0&&t.querySelector(".mbr-gallery-filter").classList.contains("gallery-filter-active")){var i=[];t.querySelectorAll(".mbr-gallery-filter > ul > li").forEach(((e,t)=>{0!=t&&e.removeChild(e.firstChild)})),a.map((function(e){var t=document.createElement("li"),r=document.createElement("a");r.classList.add("btn"),r.classList.add("btn-md"),r.classList.add("btn-primary-outline"),r.classList.add("display-7"),r.innerText=e,t.appendChild(r),i.push(t)}));var n=t.querySelector(".mbr-gallery-filter > ul");n.appendChild(l),i.forEach((e=>n.appendChild(e))),t.querySelectorAll(".mbr-gallery-filter > ul > li").forEach((e=>{e.addEventListener("click",(function(r){r.preventDefault();var l=e.closest("li");l.parentElement.querySelectorAll("li").forEach((e=>e.classList.remove("active"))),l.classList.add("active");var a=l.closest("section").querySelector(".mbr-gallery-row"),i=l.querySelector("a").innerHTML.trim();t.querySelectorAll(".mbr-gallery-item").forEach((function(e){-1!=e.getAttribute("data-tags").split(",").map((e=>e.trim())).indexOf(i)||l.classList.contains("mbr-gallery-filter-all")?(e.style.left="0",e.classList.remove("mbr-gallery-item__hided")):(e.classList.add("mbr-gallery-item__hided"),e.style.left="300px")})),a.closest(".mbr-gallery-row").dispatchEvent(new CustomEvent("filter"))}))}))}else t.querySelector(".mbr-gallery-item__hided").classList.remove("mbr-gallery-item__hided"),t.querySelector(".mbr-gallery-row").dispatchEvent(new CustomEvent("filter"))}(e),e.addEventListener("show.bs.modal",(function(e){clearTimeout(i),i=setTimeout((function(){var t=e.relatedTarget.parentElement.getAttribute("data-video-num"),r=e.target.querySelector(".carousel-item").querySelector(`.mbr-background-video[data-video-num="${t}"]`);if(r&&r.closest(".carousel-item").classList.contains("active")){var l=u[+r.getAttribute("data-video-num")];l.playVideo?l.playVideo():l.play()}}),500),o=e.target,p()})),e.addEventListener("slide.bs.carousel",(function(e){var t=e.target.querySelector(".carousel-item.active > .mbr-background-video");if(t){var r=u[+t.getAttribute("data-video-num")];r.pauseVideo?r.pauseVideo():r.pause()}})),e.addEventListener("hide.bs.modal",(function(e){u.map((function(e){e.pauseVideo?e.pauseVideo():e.pause()})),o=null}))})),window.addEventListener("resize",p),window.addEventListener("load",p)}();