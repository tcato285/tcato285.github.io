!function(n,o){var e;for(var t in n.summernote.plugins)"dropdownMenu"==n.summernote.plugins[t].name&&(e=n.summernote.plugins[t]);e?o.regExtension({name:"dropdown-menu",global:{},events:{load:function(){!function(n){var o=n.mbrBtnColor;n.mbrBtnColor=function(n,e,t,s){if(s.indexOf("-outline")<0){var a=t.editable(),d=/(?:^|\s)(btn-[a-z]+-outline)(?:\s|$)/.exec(a[0].className);if(d){a.closest("[data-app-component-id]").attr("data-app-component-id");a.removeClass(d[1]).addClass(s+"-outline")}}return o.apply(this,arguments)}}(n.summernote.pluginEvents);var e=function(){n(this.document).off("click.bs.nav-dropdown.data-api",n.fn.navDropdown.Constructor._clearMenus).off("click.bs.nav-dropdown.data-api",n.fn.navDropdown.Constructor.prototype.toggle).off("keydown.bs.nav-dropdown.data-api").on("click.bs.nav-dropdown.data-api",'[data-toggle="dropdown-submenu"]',(function(o){!1===n.fn.navDropdown.Constructor.prototype.toggle.call(this,o)&&o.preventDefault()})).click((function(e){n(document).trigger("dropdown_click");var t=n(e.target).closest(".navbar-dropdown").find(".nav-dropdown");if(t&&n.fn.navDropdown.Constructor._isCollapsed(t))return;var s=n(e.target).parents();if(s.is(".note-popover"))return;if(s.is(".nav-dropdown .dropdown.open"))return void(n(e.target).is('[data-toggle="dropdown-submenu"]')||n(e.target.parentNode).find(".dropdown.open").removeClass("open").end().find('.dropdown-toggle[aria-expanded="true"]').attr("aria-expanded","false"));n(this.body).find(".nav-dropdown").find(".dropdown.open").removeClass("open").end().find('.dropdown-toggle[aria-expanded="true"]').attr("aria-expanded","false");let a=n(this.body).find(".nav-dropdown").closest("[data-app-component-id]").attr("data-app-component-id");a&&o.getComponent(a)._customHTML&&(o.getComponent(a)._customHTML=o.getComponent(a)._customHTML.replace("dropdown open","dropdown"))}))},t=!1;n(window).blur((function(){n(this.document).find(".note-popover > *").attr("style","display: none;"),n(this.document).find(".dropdown.open").removeClass("open").end().find('.dropdown-toggle[aria-expanded="true"]').attr("aria-expanded","false")})),n(window.document).on("focusout",(function(n){t&&(t=!1,n.preventDefault())})),n.fn.rivetsOff=function(){return t=!0,this},n.fn.navDropdown?e.call(window):n(window).on("ready.bs.nav-dropdown",e),o.APP.on("beforeHideComponents",(()=>{if(o.APP.$body.hasClass("app-add-component-open")&&o.APP.appSettings.fullscreenCanvas){let e=o.getPageComponents();for(const t in e)if(e.hasOwnProperty(t)){const s=e[t];if("Menu"===s._group||s._name.toLowerCase().indexOf("menu")>-1){let e=n(o.getComponentBlock(s._id)),t=e.find(".navbar-dropdown");t.length||(t=e.find("nav")),e.removeClass("sticky-component"),t.css("position","");let a=e.find(".sticky-but");return void(a.length&&a.css("position",""))}}}})),o.APP.on("toggleComponents",(()=>{if(o.APP.appSettings.fullscreenCanvas){let e=o.getPageComponents();for(const t in e)if(e.hasOwnProperty(t)){const s=e[t];if("Menu"===s._group||s._name.toLowerCase().indexOf("menu")>-1){let e=n(o.getComponentBlock(s._id)),t=e.find(".navbar-dropdown");if(t.length||(t=e.find("nav")),o.APP.$body.hasClass("app-add-component-open")){s._params.sticky&&(e.addClass("sticky-component"),t.css("position","absolute"));let n=e.find(".sticky-but");n.length&&n.css("position","absolute")}else{e.removeClass("sticky-component"),t.css("position","");let n=e.find(".sticky-but");n.length&&n.css("position","")}return}}}})),o.APP.on("applyAppSettings",(()=>{let e=o.getPageComponents();for(const t in e)if(e.hasOwnProperty(t)){const s=e[t];if("Menu"===s._group||s._name.toLowerCase().indexOf("menu")>-1){let e=n(o.getComponentBlock(s._id)),t=e.find(".navbar-dropdown");if(t.length||(t=e.find("nav")),o.APP.appSettings.fullscreenCanvas){e.removeClass("sticky-component"),t.css("position","");let n=e.find(".sticky-but");n.length&&n.css("position","")}else{s._params.sticky&&(e.addClass("sticky-component"),t.css("position","absolute"));let n=e.find(".sticky-but");n.length&&n.css("position","absolute")}return}}}))},summernoteInited:function(o){n(o).closest(".nav-dropdown").length&&(n(o).is("[data-button]")?(n(o).summernote("popover.addGroup",["dropdownMenu",["dropdownMenuAddButton","dropdownMenuRemoveButton"]]),n.summernote.core.dom.makeLayoutInfo(n(o)).popover().find(".note-insert3").hide().end().find(".note-dropdownMenu button").tooltip({container:"body",trigger:"hover",placement:"top"})):(n(o).summernote("popover.addGroup",["dropdownMenu",["dropdownMenuAddItem","dropdownMenuAddSubItem","dropdownMenuMove"+("LI"===o.parentNode.tagName?"Left":"Up"),"dropdownMenuRemove"]]),n.summernote.core.dom.makeLayoutInfo(n(o)).popover().find(".note-insert3").hide().end().find(".note-dropdownMenu button").tooltip({container:"body",trigger:"hover",placement:"top"})))},loadedComponent:(e,t,s,a)=>{if(!a&&(e._alwaysTop||"menu"===e._once)&&(!o.APP.appSettings.fullscreenCanvas||o.APP.$body.hasClass("app-add-component-open"))){let t=n(o.getComponentBlock(e._id)),s=t.find(".navbar-dropdown");if(s.length||(s=t.find("nav")),s.length&&e._params.sticky){t.addClass("sticky-component"),s.css("position","absolute");let n=t.find(".sticky-but");n.length&&n.css("position","absolute")}}},changeComponentParams:(e,t,s)=>{if("sticky"===t&&!o.APP.appSettings.fullscreenCanvas&&(o.getComponent(e)._alwaysTop||"menu"===o.getComponent(e)._once)){let t=n(o.getComponentBlock(e)),a=t.find(".navbar-dropdown");if(a.length||(a=t.find("nav")),s){t.addClass("sticky-component");let n=a.css("position");a.css("position",n)}else t.removeClass("sticky-component"),a.css("position","");let d=t.find(".sticky-but");d.length?d.css("position","absolute"):d.css("position","")}},startChangeComponentPosition:()=>{if(o.APP.appSettings.fullscreenCanvas){let e=o.getPageComponents();for(const t in e)if(e.hasOwnProperty(t)){const s=e[t];if("Menu"===s._group||s._name.toLowerCase().indexOf("menu")>-1){let e=n(o.getComponentBlock(s._id)),t=e.find(".navbar-dropdown");t.length||(t=e.find("nav")),s._params.sticky&&(e.addClass("sticky-component"),t.css("position","absolute"));let a=e.find(".sticky-but");a.length&&a.css("position","absolute")}}}},changeComponentPosition:()=>{if(o.APP.appSettings.fullscreenCanvas){let e=o.getPageComponents();for(const t in e)if(e.hasOwnProperty(t)){const s=e[t];if("Menu"===s._group||s._name.toLowerCase().indexOf("menu")>-1){let e=n(o.getComponentBlock(s._id)),t=e.find(".navbar-dropdown");t.length||(t=e.find("nav")),e.removeClass("sticky-component"),t.css("position","");let a=e.find(".sticky-but");a.length&&a.css("position","")}}}}}}):console.log("Error: dropdownMenu summernote plugin not found")}(jQuery,mbrAppCore);